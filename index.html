<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

        <title>云南中考计算器</title>
        
        <!-- 新 Bootstrap4 核心 CSS 文件 -->
        <link rel="stylesheet" href="https://cdn.staticfile.net/twitter-bootstrap/4.3.1/css/bootstrap.min.css">
        
        <!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
        <script src="https://cdn.staticfile.net/jquery/3.2.1/jquery.min.js"></script>
        
        <!-- bootstrap.bundle.min.js 用于弹窗、提示、下拉菜单，包含了 popper.min.js -->
        <script src="https://cdn.staticfile.net/popper.js/1.15.0/umd/popper.min.js"></script>
        
        <!-- 最新的 Bootstrap4 核心 JavaScript 文件 -->
        <script src="https://cdn.staticfile.net/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>

        <script>
            var grade = {
                "云师大附中": 684,
                "昆一中": 680,
                "昆三中": 676,
                "昆八中": 676,
                "昆十中白塔校区": 662,
                "昆十中求实校区": 671,
                "云大附中星耀学校": 677,
                "昆十四中": 663,
                "昆一中西山学校": 674,
                "官一中": 659,
                "昆十二中环城南路校区": 648,
                "昆十二中环湖校区": 654,
                "云南民族中学": 644,
                "实验中学": 635,
                "实验中学（特色）": 579,
                "官二中": 654,
                "官五中": 635,
                "官六中": 635,
                "昆明市外国语学校": 643,
                "昆二十四中": 639,
                "云师大附中西山学校（西一中）": 649,
                "云师大附属世纪金源学校": 642,
                "昆三中经开学校": 665,
                "昆三中呈贡学校": 635,
                "昆三中西山学校": 656,
                "云师大实验中学盘龙校区": 665,
                "云师大实验中学盘龙校区（特色）": 624,
                "云大附中呈贡校区": 670,
                "云师大附中呈贡校区": 669,
                "昆明西南联大研究院附属学校": 663,
                "昆明西南联大研究院附属学校（特色）": 576,
                "昆一中晋宁学校": 635,
                "昆一中经开校区": 641,
                "昆一中经开校区（特色）": 555,
                "昆一中空港学校": 635,
                "昆明市盘龙区财大附中": 635,
                "官渡区北清实验学校": 667,
                "西南大学官渡实验学校": 655,
                "五华区昆一中学贯中学": 671,
                "昆明金岸中学": 635,
                "官渡区上师大实验附中": 635,
                "官渡区云师大实验附中": 653,
                "昆五中": 618,
                "昆九中": 625,
                "明德民族中学": 600,
                "昆十六中": 614,
                "昆十七中": 616,
                "昆三十中": 612,
                "昆三十一中": 606,
                "中央民附五华实验中学": 620,
                "新迎中学": 630,
                "经开一中": 627,
                "西山实验中学": 620,
                "粤秀中学": 607,
                "云光中学": 591,
                "高新三中": 610,
                "晋宁二中": 599,
                "呈贡七甸学校": 629,
                "昆五中（特色）": 560,
                "昆九中（特色）": 592,
                "明德民族中学（特色）": 555,
                "昆十七中（特色）": 581,
                "昆三十中（特色）": 555,
                "中央民附五华实验中学（特色）": 582,
                "昆明艺术学校（特色）": 555
            }
        </script>

        <style>
            #subj-exam{
                display: grid;
                grid-template-columns: auto auto auto;
            }

            .subject{
                border: 2px solid grey;
                border-radius: 2px;
                margin: 20px;
                padding: 15px;
            }
            
            #subjlist-free{
                width: 100%;
                margin: 10px;
                padding: 10px;
                border: 2px solid gray;

                display: grid;
                grid-template-columns: auto auto auto;
            }

            .subject-free{
                width: 100%;
            }
            .score-flex{
                width: 100%;
            }
            .score-extra,.score-per{
                margin: 0 2.5px;
                font-size: large;
            }
            .score-calc{
                color: orangered;
                font-size: xx-large;
                margin: 5px;
            }
            .score-sub{
                font-size: larger;
            }

            #score-result{
                margin: 20px;
            }
            #calc-result{
                color: red;
                font-size: xx-large;
            }

            @media screen and (max-width: 480px) {
                #subj-exam{
                    grid-template-columns: auto;
                }
            }
        </style>
    </head>
    <body>
        <div id="root" class="container">
            <div id="title" class="m-2">
                <h1 class="text-center">云南中考计算器</h1>
            </div>
            <div id="score-list" class="m-2">
                <div id="subj-exam">
                    <div class="subject">
                        <h2>语文</h2>
                        <div class="d-inline-flex score-flex">
                            <input type="number" min="0" max="100" class="flex-fill" />
                            <span class="score-per">*100%</span>
                            <span class="score-calc">0</span>
                        </div>
                    </div>
                    <div class="subject">
                        <h2>数学</h2>
                        <div class="d-inline-flex score-flex">
                            <input type="number" min="0" max="100" class="flex-fill" />
                            <span class="score-per">*100%</span>
                            <span class="score-calc">0</span>
                        </div>
                    </div>
                    <div class="subject">
                        <h2>英语</h2>
                        <div class="d-inline-flex score-flex">
                            <input type="number" min="0" max="100" class="flex-fill" />
                            <span class="score-per">*100%</span>
                            <span class="score-calc">0</span>
                        </div>
                    </div>
                    <div class="subject">
                        <h2>物理</h2>
                        <div class="d-inline-flex score-flex">
                            <input type="number" min="0" max="90" class="flex-fill" />
                            <span class="score-extra">+10</span>
                            <span class="score-per">*50%</span>
                            <span class="score-calc">0</span>
                        </div>
                    </div>
                    <div class="subject">
                        <h2>化学</h2>
                        <div class="d-inline-flex score-flex">
                            <input type="number" min="0" max="90" class="flex-fill" />
                            <span class="score-extra">+10</span>
                            <span class="score-per">*30%</span>
                            <span class="score-calc">0</span>
                        </div>
                    </div>
                    <div class="subject">
                        <h2>地理</h2>
                        <div class="d-inline-flex score-flex">
                            <input type="number" min="0" max="100" class="flex-fill" />
                            <span class="score-per">*30%</span>
                            <span class="score-calc">0</span>
                        </div>
                    </div>
                    <div class="subject">
                        <h2>生物</h2>
                        <div class="d-inline-flex score-flex">
                            <input type="number" min="0" max="90" class="flex-fill" />
                            <span class="score-extra">+10</span>
                            <span class="score-per">*40%</span>
                            <span class="score-calc">0</span>
                        </div>
                    </div>
                    <div class="subject">
                        <h2>历史</h2>
                        <div class="d-inline-flex score-flex">
                            <input type="number" min="0" max="100" class="flex-fill" />
                            <span class="score-per">*40%</span>
                            <span class="score-calc">0</span>
                        </div>
                    </div>
                    <div class="subject">
                        <h2>政治</h2>
                        <div class="d-inline-flex score-flex">
                            <input type="number" min="0" max="100" class="flex-fill" />
                            <span class="score-per">*40%</span>
                            <span class="score-calc">0</span>
                        </div>
                    </div>
                </div>
                
                
                <div id="subjlist-free">
                    <h2>白送</h2>
                    <div class="subject-free">
                        <span>体育:</span>
                        <span class="score-calc">100</span>
                    </div>
                    <div class="subject-free">
                        <span>音乐:</span>
                        <span class="score-calc">20</span>
                    </div>
                    <div class="subject-free">
                        <span>美术:</span>
                        <span class="score-calc">20</span>
                    </div>
                    <div class="subject-free">
                        <span>劳动技术:</span>
                        <span class="score-calc">20</span>
                    </div>
                    <div class="subject-free">
                        <span>信息技术:</span>
                        <span class="score-calc">10</span>
                    </div>
                </div>

                <div class="d-flex justify-content-center">
                    <button id="calc-start" type="button" class="btn btn-lg btn-secondary">开始计算</button>
                </div>
            </div>
            
            <div id="score-result" class="text-center">
                <span>你的中考成绩为：</span>
                <span id="calc-result"></span>
                <small>（声明：仅供参考）</small>
            </div>

            <div id="school-list" class="text-center">
                <h4>分差20分之内学校（参考2023年）：</h4>
                <div id="school-result"></div>
            </div>

            </div>
        </div>

        <script>
            $(document).ready(function(){
                $("#calc-start").click(function(){
                    $("#school-result").empty();

                    for(i of $(".subject")){
                        var c = $(i).children(".score-flex");
                        var e = c.children(".score-extra");
                        var a = 0;
                        if(e.length){
                            a = parseInt(e.text().substr(0));
                        }
                        var v = c.children(".score-per").text();
                        var r = (parseInt(c.children("input").val()) + a) * parseInt(v.substring(1, v.length - 1)) / 100;
                        c.children(".score-calc").text(isNaN(r) ? 0 : r);
                    }

                    var result = 0;
                    for(i of $(".score-calc")){
                        result += parseFloat($(i).text());
                    }
                    $("#calc-result").text(result);

                    for(i in grade){
                        var s = result - grade[i];

                        if(-20 <= s && s <= 20){
                            $("#school-result").append(
                                $("<div></div>")
                                .append([
                                    $("<span></span>").text(`${i} （${grade[i]}）`),
                                    $("<span></span>").text(s > 0 ? "+" + Math.floor(s) : Math.floor(s))
                                        .addClass("score-sub m-2 " + (s > 0 ? "text-success" : "text-danger"))
                                ])
                                .addClass("school-item")
                            );
                        }
                    }

                    if(!$("#school-result").children().length){
                        $("#school-result").append(
                            $("<div></div>")
                            .append(
                                $("<span></span>")
                                .text("好像...没有？")
                                .addClass("school-item")
                            )
                        );
                    }
                });
            });
        </script>
    </body>
</html>